Search.setIndex({"docnames": ["advance/chat_template", "advance/debug_turbomind", "advance/long_context", "advance/pytorch_new_model", "build", "faq", "get_started", "index", "internvl1.0/classification", "internvl1.0/segmentation"], "filenames": ["advance/chat_template.md", "advance/debug_turbomind.md", "advance/long_context.md", "advance/pytorch_new_model.md", "build.md", "faq.md", "get_started.md", "index.rst", "internvl1.0/classification.md", "internvl1.0/segmentation.md"], "titles": ["Customized chat template", "How to debug Turbomind", "Context length extrapolation", "How to support new model in lmdeploy.pytorch", "Build from source", "FAQ", "Get Started", "Welcome to InternVL\u2019s tutorials!", "InternViT-6B for Image Classification", "InternViT-6B for Semantic Segmentation"], "terms": {"The": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], "effect": [0, 7], "appli": 0, "can": [0, 1, 2, 3, 4, 5, 6, 8, 9], "observ": 0, "set": [0, 4, 5, 8, 9], "log": [0, 8, 9], "level": [0, 9], "info": [0, 2, 9], "lmdeploi": [0, 1, 2, 4, 6, 7], "support": [0, 2, 7, 8, 9], "two": [0, 3], "method": [0, 1, 2, 3, 6], "ad": [0, 3, 9], "One": 0, "approach": [0, 3], "i": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], "util": [0, 3, 6], "an": [0, 1, 2, 3, 7], "exist": [0, 5], "convers": 0, "directli": [0, 3], "configur": [0, 3, 4, 5], "json": [0, 1], "file": [0, 1, 4, 9], "like": [0, 3, 5, 7], "follow": [0, 2, 3, 4, 5, 6, 7, 8, 9], "model_nam": 0, "your": [0, 3, 4, 5, 6, 8, 9], "awesom": 0, "name": [0, 1, 3, 8, 9], "system": [0, 1], "im_start": 0, "n": [0, 1, 3], "meta_instruct": 0, "you": [0, 1, 2, 3, 4, 5, 6, 8, 9], "ar": [0, 1, 3, 5, 8], "robot": 0, "develop": [0, 5, 6], "eosi": 0, "im_end": 0, "user": [0, 5, 6], "eoh": 0, "assist": [0, 3], "eoa": 0, "separ": 0, "capabl": [0, 3, 8, 9], "stop_word": 0, "requir": [0, 3, 4, 5, 6], "field": 0, "either": 0, "built": [0, 1], "which": [0, 1, 2, 3, 4, 5, 8, 9], "view": [0, 3], "through": [0, 3, 5], "list": [0, 3, 8], "new": 0, "other": [0, 1, 9], "option": [0, 1, 3], "when": [0, 1, 2, 3, 5], "non": 0, "null": 0, "overrid": 0, "correspond": [0, 8, 9], "attribut": [0, 3], "origin": [0, 3], "howev": [0, 6], "regist": [0, 3], "basechattempl": 0, "specif": [0, 2, 3, 4, 5], "definit": 0, "refer": [0, 1, 2, 3, 6, 8, 9], "would": [0, 3], "thi": [0, 1, 2, 3, 4, 5, 8, 9], "user_cont": 0, "assistant_cont": 0, "us": [0, 2, 3, 4, 5, 7, 8, 9], "cli": [0, 5, 6], "tool": [0, 2, 3, 5, 7], "pass": [0, 2, 3, 5], "exampl": [0, 1, 2, 3, 5, 9], "serv": [0, 1, 7], "api_serv": [0, 1, 5], "internlm": [0, 1, 2, 3, 4, 5, 6], "internlm2_5": [0, 2, 5, 6], "7b": [0, 2, 3, 5, 6], "json_fil": 0, "also": [0, 8], "interfac": [0, 5], "function": [0, 6], "from": [0, 1, 2, 3, 5, 6, 7, 8, 9], "import": [0, 2, 3, 5, 6], "chattemplateconfig": 0, "chat_template_config": 0, "from_json": 0, "anoth": [0, 5], "python": [0, 4, 5, 6, 8, 9], "class": [0, 3], "It": [0, 3, 5], "after": [0, 1, 3, 5], "success": [0, 1], "registr": [0, 3], "advantag": 0, "high": [0, 7], "degre": 0, "strong": 0, "control": 0, "below": [0, 3, 4, 8], "model": [0, 1, 2, 5, 6, 7], "register_modul": 0, "customized_model": 0, "customizedmodel": 0, "A": [0, 3, 8], "def": [0, 2, 3], "__init__": 0, "self": [0, 3], "action_end": 0, "super": 0, "pipelin": [0, 2, 5, 6], "messag": [0, 5], "role": 0, "content": 0, "who": 0, "pipe": [0, 2, 5, 6], "respons": [0, 2, 5, 6], "stream_inf": 0, "print": [0, 2, 5, 6], "text": [0, 2], "end": [0, 2], "In": [0, 3, 4, 5, 8, 9], "we": [0, 1, 2, 3, 4, 5, 8, 9], "creat": [0, 2, 3], "so": [0, 7, 9], "ask": 0, "answer": 0, "wa": [0, 1], "implement": [1, 2, 3, 8, 9], "c": [1, 5], "easi": [1, 7], "document": 1, "provid": [1, 3, 4, 6], "basic": 1, "first": [1, 3, 8], "complet": [1, 3, 6], "local": [1, 4, 5], "compil": [1, 4, 5, 6], "accord": [1, 5, 8], "command": [1, 4, 5], "build": [1, 3, 5, 7], "localhost": 1, "sinc": 1, "mani": [1, 2], "larg": [1, 3, 5], "compani": 1, "current": [1, 5, 9], "cento": 1, "7": [1, 2, 8], "onlin": [1, 6], "product": 1, "illustr": 1, "process": [1, 3, 7], "rpm": 1, "qa": 1, "grep": [1, 5], "result": [1, 3, 8], "should": [1, 3, 9], "similar": 1, "usernam": 1, "hostnam": 1, "workdir": 1, "2": [1, 2, 3, 7, 8, 9], "17": 1, "325": 1, "el7_9": 1, "x86_64": 1, "common": [1, 3, 8], "header": 1, "devel": 1, "pip": [1, 4, 5, 6, 8], "9": [1, 4, 8, 9], "0": [1, 2, 3, 4, 6, 8, 9], "3": [1, 3, 6, 9], "8": [1, 2, 4, 6, 8, 9], "el7": 1, "noarch": 1, "macro": 1, "34": 1, "gener": [1, 4, 5, 8], "6": 1, "setuptool": 1, "39": 1, "10": [1, 5], "21": 1, "4": [1, 2, 3, 4, 7, 8, 9], "sre": 1, "1": [1, 2, 3, 4, 6, 8, 9], "el6": 1, "base": [1, 3, 5], "inform": [1, 2, 3, 6, 9], "abov": [1, 3, 8, 9], "see": [1, 5, 8], "http": [1, 4, 5, 6, 8, 9], "org": [1, 4, 6, 8], "ivh": 1, "sudo": 1, "yum": 1, "devtoolset": 1, "y": 1, "echo": 1, "sourc": [1, 5, 6, 7, 9], "scl_sourc": 1, "enabl": [1, 2, 3], "bashrc": 1, "output": [1, 3], "gnu": 1, "red": 1, "hat": 1, "enterpris": 1, "linux": 1, "copyright": 1, "2020": 1, "free": 1, "softwar": 1, "foundat": 1, "inc": 1, "licens": 1, "gplv3": 1, "gpl": 1, "later": 1, "html": 1, "chang": [1, 2, 3], "redistribut": 1, "There": [1, 2, 5], "NO": 1, "warranti": 1, "extent": 1, "permit": 1, "law": 1, "type": [1, 8, 9], "show": [1, 5], "copi": 1, "detail": [1, 3, 5, 6, 8], "redhat": 1, "For": [1, 2, 3, 5, 6, 9], "bug": 1, "report": [1, 8], "instruct": [1, 2, 4], "pleas": [1, 2, 4, 5, 6, 8, 9], "www": 1, "find": [1, 2, 5], "manual": [1, 5], "resourc": 1, "help": [1, 6], "apropo": 1, "word": 1, "search": [1, 7], "relat": [1, 5], "read": 1, "If": [1, 3, 4, 5, 9], "ha": [1, 7], "been": [1, 5, 7], "oper": [1, 3], "debuggingwithgdb": 1, "need": [1, 3, 5, 8, 9], "everi": [1, 5], "time": [1, 2], "directori": [1, 4, 5, 8, 9], "e": [1, 4, 8], "g": 1, "cd": [1, 4, 5, 8, 9], "lib": [1, 4], "ln": [1, 5], "": [1, 2, 3, 5], "compile_command": 1, "clangd": 1, "index": [1, 6, 7], "api": 1, "server": [1, 6, 7], "llama": [1, 3], "13b": [1, 3], "chat": [1, 2, 3, 5, 6], "hf": [1, 3, 8, 9], "arg": 1, "m": [1, 5, 8], "breakpoint": 1, "rel": 1, "path": [1, 4, 5, 9], "b": 1, "src": 1, "blockmanag": 1, "cc": 1, "104": 1, "No": 1, "make": [1, 4, 5], "pend": 1, "futur": 1, "share": 1, "load": [1, 2, 3], "just": [1, 6], "press": 1, "enter": 1, "run": [1, 4, 5, 8, 9], "r": [1, 4, 8], "github": [1, 4, 5, 6], "com": [1, 4, 5, 6, 8], "blob": [1, 5], "main": [1, 8, 9], "benchmark": [1, 8], "profile_restful_api": 1, "py": [1, 3, 5, 8, 9], "send": 1, "request": [1, 4, 5, 7], "server_addr": 1, "127": 1, "23333": 1, "tokenizer_path": 1, "dataset": [1, 8, 9], "sharegpt_v3_unfiltered_cleaned_split": 1, "concurr": 1, "num_prompt": 1, "execut": [1, 3, 4, 5], "happi": 1, "long": 2, "abil": 2, "llm": [2, 3, 6, 7], "handl": 2, "data": 2, "longer": 2, "than": [2, 3, 4, 7], "train": [2, 8], "dure": [2, 5, 7, 9], "infer": [2, 3, 7], "turbomind": 2, "engin": [2, 3, 7], "now": [2, 3, 5, 8], "llamadynamicntkscalingrotaryembed": 2, "consist": 2, "huggingfac": [2, 8, 9], "abal": 2, "modifi": [2, 3], "turbomindengineconfig": [2, 5], "edit": 2, "session_len": 2, "expect": [2, 3, 8], "rope_scaling_factor": 2, "number": [2, 3], "less": [2, 4], "take": [2, 3, 5], "1m": 2, "up": [2, 4, 5, 7, 9], "million": 2, "token": 2, "generationconfig": 2, "backend_config": [2, 5], "5": [2, 3, 4, 5, 6, 8, 9], "1000000": 2, "max_batch_s": 2, "cache_max_entry_count": [2, 5], "tp": [2, 3], "prompt": 2, "replac": [2, 3], "sentenc": 2, "gen_config": 2, "top_p": 2, "top_k": 2, "40": 2, "temperatur": 2, "max_new_token": 2, "1024": 2, "sever": [2, 8], "includ": [2, 3, 9], "comput": [2, 3], "try": [2, 5], "code": [2, 3, 4, 5, 6, 8, 9], "test": [2, 3, 8, 9], "how": 2, "special": [2, 3], "kei": [2, 3, 7], "numpi": 2, "np": 2, "passkey_retriev": 2, "n_round": 2, "input": [2, 3], "tok": 2, "task_descript": 2, "hidden": 2, "insid": 2, "lot": 2, "irrelev": 2, "memor": 2, "them": [2, 3, 8, 9], "quiz": 2, "about": [2, 3], "garbag": 2, "grass": 2, "green": 2, "sky": 2, "blue": 2, "sun": 2, "yellow": 2, "here": [2, 3, 6, 9], "go": [2, 5], "back": 2, "again": 2, "_": 2, "rang": 2, "start": [2, 3], "perf_count": 2, "n_time": 2, "1000": 2, "len": 2, "encod": 2, "n_garbage_prefix": 2, "random": 2, "randint": 2, "n_garbage_suffix": 2, "garbage_prefix": 2, "join": 2, "garbage_suffix": 2, "pass_kei": 2, "50000": [2, 8], "information_lin": 2, "f": 2, "rememb": [2, 3, 7], "noqa": 2, "e501": 2, "final_quest": 2, "what": 2, "line": 2, "durat": 2, "approxim": 2, "364": 2, "second": [2, 5], "per": 2, "round": [2, 7], "conduct": [2, 3, 9], "a100": 2, "80g": 2, "gpu": [2, 3, 8, 9], "opencompass": [2, 7], "offer": [2, 3, 6], "veri": 2, "perform": [2, 3, 7, 8], "guid": [2, 6, 8], "demonstr": 2, "calcul": 2, "transform": [2, 3], "autotoken": 2, "model_repoid_or_path": 2, "from_pretrain": [2, 3], "trust_remote_cod": 2, "true": [2, 3], "get": [2, 3, 4, 5], "input_id": [2, 3], "ppl": 2, "get_ppl": 2, "design": 3, "eas": 3, "deploy": [3, 7], "prototyp": 3, "verif": 3, "willing": 3, "our": [3, 8, 9], "tutori": 3, "let": 3, "begin": 3, "befor": [3, 4, 5, 8], "delv": 3, "essenti": 3, "acquaint": 3, "ourselv": 3, "order": 3, "accommod": 3, "featur": [3, 6, 7], "within": 3, "some": [3, 8], "deviat": 3, "typic": 3, "To": [3, 8, 9], "circumv": [3, 4], "batch": [3, 7, 9], "pad": 3, "continu": [3, 7], "emploi": 3, "consequ": 3, "repres": 3, "concaten": 3, "all": [3, 4, 5], "sequenc": 3, "unsqueez": 3, "align": 3, "dimens": 3, "effort": 3, "optim": 3, "memori": 3, "usag": [3, 5], "valu": 3, "cach": [3, 5, 7], "page": [3, 7], "attent": [3, 7], "past_key_valu": 3, "substanti": 3, "num_block": 3, "block_siz": 3, "num_head": 3, "head_dim": 3, "denot": 3, "block": [3, 7], "indic": 3, "size": [3, 8, 9], "each": [3, 6], "accompani": 3, "addit": [3, 8], "imper": 3, "describ": 3, "These": 3, "tabl": [3, 8, 9], "histori": [3, 7], "length": 3, "note": [3, 5, 8, 9], "supplementari": 3, "explicitli": 3, "argument": 3, "forward": 3, "instead": 3, "object": 3, "furnish": 3, "due": [3, 5], "alter": 3, "structur": [3, 8, 9], "mention": 3, "earlier": 3, "both": 3, "llamamodel": 3, "llamaattent": 3, "adjust": [3, 9], "nn": 3, "torch": [3, 8], "longtensor": 3, "none": 3, "attention_mask": 3, "position_id": 3, "floattensor": 3, "inputs_emb": 3, "use_cach": 3, "bool": 3, "output_attent": 3, "output_hidden_st": 3, "return_dict": 3, "union": 3, "tupl": 3, "basemodeloutputwithpast": 3, "rewrit": 3, "embed_token": 3, "hidden_st": 3, "decod": 3, "layer": 3, "idx": 3, "decoder_lay": 3, "enumer": 3, "layer_output": 3, "norm": 3, "return": 3, "last_hidden_st": 3, "kernel": [3, 7], "apply_rotary_pos_emb": 3, "fill_kv_cach": 3, "paged_attention_fwd": 3, "fals": 3, "history_length": 3, "position_ids_1d": 3, "block_offset": 3, "qkv": 3, "proj": [3, 9], "query_st": 3, "q_proj": 3, "key_stat": 3, "k_proj": 3, "value_st": 3, "v_proj": 3, "num_kv_head": 3, "rotari": 3, "embed": 3, "max_seq_len": 3, "kv_seq_len": 3, "max": [3, 5], "rotary_emb": 3, "max_seq_len_cach": 3, "co": [3, 8, 9], "sin": 3, "seq_len": 3, "128": 3, "cos_cach": 3, "sin_cach": 3, "q_emb": 3, "k_emb": 3, "fill": 3, "kv": [3, 7], "kv_seq_length": 3, "q_seq_length": 3, "q_start_loc": 3, "attn_output": 3, "q_seqlen": 3, "kv_seqlen": 3, "max_seqlen": 3, "hidden_s": 3, "reshap": 3, "shape": 3, "o": 3, "o_proj": 3, "access": 3, "act": 3, "contain": [3, 8, 9], "necessari": 3, "more": [3, 6], "have": [3, 4, 5], "certain": 3, "custom": 3, "triton": 3, "reason": [3, 5], "allow": 3, "u": [3, 8], "incorpor": 3, "fuse": [3, 7], "superior": 3, "compar": 3, "pure": 3, "updat": [3, 5], "module_map": 3, "model_map": 3, "modeling_llama": 3, "map": 3, "revis": 3, "associ": 3, "counterpart": 3, "modelag": 3, "automat": [3, 7], "patch": 3, "subsequ": 3, "aim": 3, "partit": [3, 8, 9], "weight": [3, 5, 6, 7, 8, 9], "upon": 3, "previous": 3, "modif": 3, "well": 3, "most": [3, 8, 9], "languag": 3, "primarili": 3, "affect": 3, "linear": [3, 9], "compon": [3, 8, 9], "column": 3, "wise": 3, "while": [3, 5, 8], "necessit": 3, "row": 3, "llamamlp": 3, "gate_proj": 3, "up_proj": 3, "down_proj": 3, "_distribution_partition_fn": 3, "rewritten": 3, "dist_util": 3, "colwise_parallelize_linear_fn": 3, "rowwise_parallelize_linear_fn": 3, "classmethod": 3, "_distribute_partition_fn": 3, "cl": 3, "mod_nam": 3, "str": 3, "mod": 3, "device_mesh": 3, "devicemesh": 3, "distribut": [3, 7, 8], "callback": 3, "to_loc": 3, "elif": 3, "call": 3, "across": [3, 7], "differ": [3, 5, 9], "devic": 3, "becom": 3, "all_reduc": 3, "one": [3, 5, 6], "altern": 3, "introduc": [3, 7], "_distribute_output_fn": 3, "dist": 3, "hook": 3, "add": [3, 5], "With": 3, "multipl": [3, 5, 7], "deploi": [3, 7], "effici": [3, 5, 7], "manner": 3, "doe": [3, 5, 9], "meet": [3, 6], "determin": 3, "correct": 3, "accuraci": [3, 8], "instanc": 3, "want": [3, 5, 9], "automodelforcausallm": 3, "model_path": 3, "meta": 3, "dtype": 3, "float16": 3, "cuda": [3, 6, 7], "self_attn": 3, "extract": 3, "moduleioextractor": 3, "make_input": 3, "extractor": 3, "attn_arg": 3, "attn_kwarg": 3, "stepcontext": 3, "make_step_context": 3, "continuous_tensor": 3, "do": 3, "demand": 3, "layout_convert": 3, "kv_cache_dtyp": 3, "num_key_value_head": 3, "32": 3, "seq_length": 3, "kv_cach": 3, "Then": [3, 4, 8, 9], "patched_self_attn": 3, "extra_arg": 3, "inference_mod": 3, "patched_output": 3, "patched_forward": 3, "assert_clos": 3, "until": 3, "dataclass": 3, "modelinput": 3, "max_seq_length": 3, "int": 3, "is_decod": 3, "world_siz": 3, "json_config": 3, "dict": 3, "local_adapter_id": 3, "global_adapter_id": 3, "adapter_offset": 3, "max_rank": 3, "invok": 3, "rather": 3, "unpatch": 3, "origin_mod": 3, "remot": 3, "locat": [3, 5], "pinpoint": 3, "via": [3, 5, 7, 8], "qualnam": 3, "might": [3, 5], "challeng": [3, 5], "facilit": [3, 7], "abbrevi": 3, "modeling_internlm": 3, "internlmattent": 3, "patchedinternlmattent": 3, "although": 3, "thei": 3, "tend": 3, "lower": 3, "prioriti": 3, "advis": [3, 4], "robust": 3, "accur": 3, "same": 3, "singl": [3, 8, 9], "distinct": 3, "consid": 3, "baichuan2": 3, "baichuanmodel": 3, "config": [3, 8, 9], "num_hidden_lay": 3, "forward_7b": 3, "els": 3, "forward_default": 3, "post": 3, "initi": 3, "task": 3, "_update_model_fn": 3, "ani": 3, "step": [3, 4], "case": [3, 5], "prebuilt": [4, 6], "packag": [4, 5, 6], "easili": 4, "instal": [4, 5, 7, 8], "clone": 4, "repositori": 4, "next": 4, "section": [4, 8, 9], "git": 4, "depth": 4, "highli": 4, "imag": [4, 5, 9], "complex": 4, "environ": [4, 5], "setup": 4, "openmmlab": 4, "builder": 4, "cuda11": 4, "sure": [4, 5], "root": [4, 5, 9], "home": 4, "folder": [4, 8, 9], "bash": [4, 5], "manywheel": 4, "build_all_wheel": 4, "sh": [4, 5, 8, 9], "wheel": 4, "under": 4, "py3": 4, "11": [4, 6], "found": 4, "8_dist": 4, "12": [4, 6, 8, 9], "cp310": 4, "manylinux2014_x86_64": [4, 6], "whl": [4, 5, 6], "cp311": 4, "cp38": 4, "cp39": 4, "version": 4, "build_wheel": 4, "py38": 4, "And": [4, 5], "match": [4, 5, 8], "host": [4, 5], "machin": [4, 5, 7], "firstli": 4, "gcc": 4, "conform": 4, "depend": [4, 5, 6], "txt": [4, 8], "apt": 4, "rapidjson": 4, "dev": 4, "nccl": [4, 5], "variabl": [4, 5], "export": [4, 5, 6], "nccl_root_dir": 4, "nccl_librari": 4, "openmpi": 4, "wget": [4, 8, 9], "download": [4, 5, 6, 8, 9], "open": [4, 9], "mpi": 4, "releas": [4, 5, 6], "v4": 4, "tar": [4, 8], "gz": [4, 8], "xf": 4, "prefix": [4, 7], "usr": [4, 5], "j": [4, 5], "nproc": [4, 5], "bin": [4, 5], "ld_library_path": [4, 5], "librari": 4, "ninja": [4, 5], "mkdir": [4, 5, 9], "probabl": 5, "its": [5, 8], "latest": 5, "upgrad": 5, "mai": [5, 9], "caus": 5, "haven": 5, "t": 5, "precompil": 5, "pybind": 5, "involv": 5, "recommend": [5, 9], "nightli": 5, "zhync": 5, "frequenc": [5, 8], "onc": 5, "dai": 5, "still": 5, "encount": 5, "issu": 5, "becaus": 5, "switch": 5, "fix": 5, "But": 5, "often": 5, "too": 5, "low": 5, "specifi": 5, "bld": 5, "subdirectori": 5, "check_env": 5, "python3": 5, "problem": 5, "mean": 5, "mayb": 5, "python_execut": 5, "actual": 5, "situat": 5, "dpython_execut": 5, "recompil": 5, "v0": 5, "nvidia": 5, "cu11": 5, "insert": 5, "toolkit": [5, 7], "minimum": 5, "usual": 5, "disproportion": 5, "ratio": 5, "k": [5, 6, 7, 9], "dictat": 5, "implic": 5, "paramet": [5, 6, 9], "slight": 5, "variat": 5, "52419bd5b6fb419a5e3aaf3c3b4dea874b17e094": 5, "l107": 5, "reduc": 5, "hi": [5, 6], "pl": [5, 6], "intro": [5, 6], "yourself": [5, 6], "shanghai": [5, 6], "oom": 5, "occur": 5, "entri": 5, "count": 5, "decreas": 5, "url": [5, 6], "lmdeploy_fetch_timeout": 5, "By": [5, 7], "default": [5, 6], "vl": 5, "check": 5, "disk": 5, "space": 5, "insuffici": 5, "save": 5, "70b": 5, "qwen": 5, "flash": 5, "attn": 5, "feedback": 5, "commun": 5, "therefor": 5, "remov": 5, "etc": 6, "few": [6, 9], "simpl": 6, "lmdeploy_vers": 6, "python_vers": 6, "38": 6, "v": [6, 7, 9], "cu118": 6, "cp": 6, "extra": 6, "pytorch": [6, 8, 9], "variou": 6, "choos": 6, "best": 6, "openai": 6, "compat": [6, 7], "docker": 6, "gradio": 6, "visit": 6, "link": [6, 8, 9], "4bit": 6, "onli": [6, 7, 8, 9], "w8a8": 6, "experi": [6, 9], "conveni": 6, "adopt": [6, 8], "demo": 6, "launch": [6, 8], "compress": 7, "star": 7, "watch": 7, "fork": 7, "core": [7, 8, 9], "deliv": 7, "8x": 7, "higher": 7, "throughput": 7, "vllm": 7, "persist": 7, "dynam": 7, "split": 7, "tensor": 7, "parallel": 7, "quantiz": 7, "bit": 7, "4x": 7, "fp16": 7, "qualiti": [7, 8], "confirm": 7, "evalu": 7, "effortless": 7, "leverag": 7, "servic": 7, "multi": 7, "card": 7, "interact": 7, "mode": 7, "dialogu": 7, "thu": 7, "avoid": 7, "repetit": 7, "histor": 7, "session": 7, "excel": 7, "quant": 7, "awq": 7, "simultan": 7, "offlin": 7, "internvit": [], "6b": [], "internvl": [8, 9], "part": [8, 9], "paper": [8, 9], "valid": [8, 9], "visual": [8, 9], "percept": [8, 9], "investig": 9, "pixel": 9, "perceptu": 9, "capac": 9, "extens": 9, "semant": [], "ade20k": 9, "symlink": 9, "adechallengedata2016": 9, "annot": 9, "could": 9, "guidelin": 9, "mmsegment": 9, "224px": [8, 9], "gb": [8, 9], "place": [8, 9], "pretrain": [8, 9], "opengvlab": [8, 9], "resolv": [8, 9], "intern_vit_6b_224px": [8, 9], "pth": [8, 9], "deepspe": 9, "probe": 9, "head": [8, 9], "tune": 9, "full": 9, "classifi": [8, 9], "node": 9, "total": 9, "16": 9, "dist_train": 9, "intern_vit_6b": 9, "linear_prob": 9, "linear_intern_vit_6b_504_80k_ade20k_bs16_lr4": 9, "5_frozen": 9, "manag": [8, 9], "job": [8, 9], "slurm": [8, 9], "slurm_train": 9, "backbon": [8, 9], "miou": 9, "shot": 9, "46": 9, "ckpt": [8, 9], "50": 9, "53": 9, "55": 9, "57": 9, "frozen": [8, 9], "47": 9, "upernet": 9, "54": 9, "58": 9, "checkpoint": 9, "eval": [8, 9], "dist_test": 9, "prepar": [], "segment": 7, "titl": [], "normal": 9, "appear": 9, "safe": 9, "ignor": 9, "mmseg": 9, "_incompatiblekei": 9, "missing_kei": 9, "unexpected_kei": 9, "clip_projector": 9, "norm1_q": 9, "bia": 9, "norm1_k": 9, "norm1_v": 9, "cross_attn": 9, "q_bia": 9, "k_bia": 9, "v_bia": 9, "q": 9, "codebas": 8, "deriv": 8, "internimag": 8, "eva": 8, "dinov2": 8, "thank": 8, "great": 8, "work": 8, "vanilla": 8, "vit": 8, "hyperparamet": 8, "md": [], "standard": 8, "net": 8, "peopl": 8, "eec": 8, "berkelei": 8, "edu": 8, "hendryck": 8, "imagenetv2": 8, "imagenetv2publ": 8, "s3": 8, "west": 8, "amazonaw": 8, "sketch": 8, "gdown": 8, "id": 8, "1mj0i5hbthqh1p_yexzsg22gzduvgonea": 8, "outlin": 8, "tree": 8, "n01498041": 8, "val": 8, "ilsvrc2012_val_00000001": 8, "jpeg": 8, "n01443537": 8, "n01440764": 8, "unzip": 8, "zip": 8, "meta_data": 8, "25": 8, "mb": 8, "intern_vit_6b_224px_head": 8, "apex": 8, "nproc_per_nod": 8, "master_port": 8, "12345": 8, "cfg": 8, "intern_vit_6b_1k_224": 8, "yaml": 8, "train_in1k": 8, "launcher": 8, "IN": 8, "real": 8, "v2": 8, "88": 8, "90": 8, "79": 8, "77": 8, "89": 8, "69": 8, "click": 8, "expand": 8, "resum": 8, "acc": 8, "230": 8, "98": 8, "474": 8, "network": 8, "intern_vit_6b_1k_224_test_imagenet_r": 8, "gpus_per_nod": 8, "437": 8, "567": 8, "loss": 8, "605": 8, "intern_vit_6b_1k_224_test_imagenetv2": 8, "940": 8, "95": 8, "340": 8, "10000": 8, "intern_vit_6b_1k_224_test_imagenet_a": 8, "479": 8, "92": 8, "737": 8, "7500": 8, "777": 8, "97": 8, "023": 8, "30000": 8, "intern_vit_6b_1k_224_test_imagenet_sketch": 8, "117": 8, "341": 8, "50889": 8, "represent": 8, "produc": 8, "practic": 8, "37": [], "111": [], "keep": 8, "metric": 8, "variant": 8, "domain": 8, "22k_class_to_idx": [], "imagenet_class": [], "map22kto1k": []}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"custom": 0, "chat": [0, 7], "templat": 0, "how": [1, 3], "debug": [1, 3], "turbomind": [1, 5], "prerequisit": 1, "configur": 1, "python": 1, "environ": 1, "obtain": 1, "glibc": 1, "python3": 1, "version": [1, 5], "download": 1, "instal": [1, 6], "debuginfo": 1, "librari": 1, "upgrad": 1, "gdb": 1, "verif": 1, "set": 1, "up": 1, "symbol": [1, 5], "link": [1, 5], "start": [1, 6, 7], "us": [1, 6], "context": [2, 3], "length": 2, "extrapol": 2, "usag": 2, "evalu": [2, 8, 9], "passkei": 2, "retriev": 2, "needl": 2, "In": 2, "A": 2, "haystack": 2, "perplex": 2, "support": 3, "new": 3, "model": [3, 8, 9], "lmdeploi": [3, 5], "pytorch": 3, "tensor": 3, "parallel": 3, "modul": [3, 5], "appendix": 3, "info": 3, "faq": [3, 5], "build": 4, "from": 4, "sourc": 4, "docker": 4, "recommend": 4, "localhost": 4, "option": 4, "modulenotfounderror": 5, "No": 5, "name": 5, "mmengin": 5, "config": 5, "lazi": 5, "_turbomind": 5, "lib": 5, "libnccl": 5, "so": 5, "2": 5, "found": 5, "cudafreeasync": 5, "libcudart": 5, "11": 5, "0": [5, 7], "defin": 5, "file": 5, "time": 5, "refer": 5, "infer": [5, 6], "runtimeerror": 5, "tm": 5, "error": 5, "cuda": 5, "runtim": 5, "out": 5, "memori": 5, "workspac": 5, "src": 5, "util": 5, "alloc": 5, "h": 5, "serv": [5, 6], "api": 5, "server": 5, "fetch": 5, "timeout": 5, "quantiz": [5, 6], "enforc": 5, "fail": 5, "inline_contain": 5, "cc": 5, "337": 5, "unexpect": 5, "po": 5, "4566829760": 5, "v": 5, "4566829656": 5, "flash_attn": 5, "get": [6, 7], "offlin": 6, "batch": 6, "tool": 6, "command": 6, "line": 6, "interfac": 6, "web": 6, "ui": 6, "welcom": 7, "internvl": 7, "": 7, "tutori": 7, "document": 7, "llava": 7, "classif": [7, 8], "clip": 7, "benchmark": 7, "g": 7, "segment": 9, "indic": 7, "tabl": 7, "internvit": [8, 9], "6b": [8, 9], "data": [8, 9], "prepar": [8, 9], "train": 9, "1": 7, "titl": [], "imag": 8, "linear": 8, "probe": 8, "imagenet": 8, "1k": 8, "semant": 9}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.viewcode": 1, "sphinx.ext.intersphinx": 1, "sphinx": 57}, "alltitles": {"Customized chat template": [[0, "customized-chat-template"]], "How to debug Turbomind": [[1, "how-to-debug-turbomind"]], "Prerequisite": [[1, "prerequisite"]], "Configure Python debug environment": [[1, "configure-python-debug-environment"]], "Obtain glibc and python3 versions": [[1, "obtain-glibc-and-python3-versions"]], "Download and install debuginfo library": [[1, "download-and-install-debuginfo-library"]], "Upgrade GDB": [[1, "upgrade-gdb"]], "Verification": [[1, "verification"]], "Set up symbolic links": [[1, "set-up-symbolic-links"]], "Start debugging": [[1, "start-debugging"]], "Using GDB": [[1, "using-gdb"]], "Context length extrapolation": [[2, "context-length-extrapolation"]], "Usage": [[2, "usage"]], "Evaluation": [[2, "evaluation"], [8, "evaluation"], [9, "evaluation"]], "Passkey Retrieval": [[2, "passkey-retrieval"]], "Needle In A Haystack": [[2, "needle-in-a-haystack"]], "Perplexity": [[2, "perplexity"]], "How to support new model in lmdeploy.pytorch": [[3, "how-to-support-new-model-in-lmdeploy-pytorch"]], "Support New Model": [[3, "support-new-model"]], "Support Tensor Parallelism": [[3, "support-tensor-parallelism"]], "Debug Module": [[3, "debug-module"]], "Appendix": [[3, "appendix"]], "context info": [[3, "context-info"]], "FAQ": [[3, "faq"], [5, "faq"]], "Build from source": [[4, "build-from-source"]], "Build in Docker (recommended)": [[4, "build-in-docker-recommended"]], "Build in localhost (optional)": [[4, "build-in-localhost-optional"]], "ModuleNotFoundError": [[5, "modulenotfounderror"]], "No module named \u2018mmengine.config.lazy\u2019": [[5, "no-module-named-mmengine-config-lazy"]], "No module named \u2018_turbomind\u2019": [[5, "no-module-named-turbomind"]], "Libs": [[5, "libs"]], "libnccl.so.2 not found": [[5, "libnccl-so-2-not-found"]], "symbol cudaFreeAsync version libcudart.so.11.0 not defined in file libcudart.so.11.0 with link time reference": [[5, "symbol-cudafreeasync-version-libcudart-so-11-0-not-defined-in-file-libcudart-so-11-0-with-link-time-reference"]], "Inference": [[5, "inference"]], "RuntimeError: [TM][ERROR] CUDA runtime error: out of memory /workspace/lmdeploy/src/turbomind/utils/allocator.h": [[5, "runtimeerror-tm-error-cuda-runtime-error-out-of-memory-workspace-lmdeploy-src-turbomind-utils-allocator-h"]], "Serve": [[5, "serve"]], "Api Server Fetch Timeout": [[5, "api-server-fetch-timeout"]], "Quantization": [[5, "quantization"], [6, "quantization"]], "RuntimeError: [enforce fail at inline_container.cc:337] . unexpected pos 4566829760 vs 4566829656": [[5, "runtimeerror-enforce-fail-at-inline-container-cc-337-unexpected-pos-4566829760-vs-4566829656"]], "ModuleNotFoundError: No module named \u2018flash_attn\u2019": [[5, "modulenotfounderror-no-module-named-flash-attn"]], "Get Started": [[6, "get-started"], [7, null]], "Installation": [[6, "installation"]], "Offline batch inference": [[6, "offline-batch-inference"]], "Serving": [[6, "serving"]], "Useful Tools": [[6, "useful-tools"]], "Inference with Command line Interface": [[6, "inference-with-command-line-interface"]], "Serving with Web UI": [[6, "serving-with-web-ui"]], "InternViT-6B for Image Classification": [[8, "internvit-6b-for-image-classification"]], "Data Preparation": [[8, "data-preparation"], [9, "data-preparation"]], "Model Preparation": [[8, "model-preparation"], [9, "model-preparation"]], "Linear Probing on ImageNet-1K": [[8, "linear-probing-on-imagenet-1k"]], "InternViT-6B for Semantic Segmentation": [[9, "internvit-6b-for-semantic-segmentation"]], "Training": [[9, "training"]], "Welcome to InternVL\u2019s tutorials!": [[7, "welcome-to-internvl-s-tutorials"]], "Documentation": [[7, "documentation"]], "InternVL-Chat": [[7, null]], "InternVL-Chat-LLaVA": [[7, null]], "Classification": [[7, null]], "CLIP Benchmark": [[7, null]], "InternVL-G": [[7, null]], "InternVL 1.0": [[7, null]], "Indices and tables": [[7, "indices-and-tables"]]}, "indexentries": {}})